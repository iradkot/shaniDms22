appId: com.shanidms22
---
# Tabs visibility: verify Settings toggles hide/show optional tabs.

- launchApp:
    clearState: true

# Either we land on tabs (already authenticated) or we land on login.
- extendedWaitUntil:
        visible:
            id: tabs.navigator
        timeout: 15000
        optional: true

- extendedWaitUntil:
        visible:
            id: login.screen
        timeout: 15000
        optional: true

# Deterministic E2E login (only available in E2E-enabled builds).
- runFlow:
        when:
            visible:
                id: login.screen
        commands:
            - extendedWaitUntil:
                    visible:
                        id: login.e2eButton
                    timeout: 15000
            - tapOn:
                    id: login.e2eButton

- extendedWaitUntil:
    visible:
      id: tabs.navigator
    timeout: 30000

# Defaults should be OFF after clearState.
- assertNotVisible:
    id: tab.food
- assertNotVisible:
    id: tab.sport
- assertNotVisible:
    id: tab.notifications

# Go to Settings.
- tapOn:
    id: tab.settings
- extendedWaitUntil:
    visible:
      id: screen.settings
    timeout: 15000

# Turn OFF Food + Sport + Notifications.
- tapOn:
    id: settings.toggle.foodTab
- tapOn:
    id: settings.toggle.sportTab
- tapOn:
    id: settings.toggle.notificationsTab

# Tabs should now appear in the tab bar.
- assertVisible:
    id: tab.food
- assertVisible:
    id: tab.sport
- assertVisible:
    id: tab.notifications

# Turn them back OFF.
- tapOn:
    id: settings.toggle.foodTab
- tapOn:
    id: settings.toggle.sportTab
- tapOn:
    id: settings.toggle.notificationsTab

- assertNotVisible:
    id: tab.food
- assertNotVisible:
    id: tab.sport
- assertNotVisible:
    id: tab.notifications
