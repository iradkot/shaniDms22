appId: com.shanidms22
---
- launchApp:
        clearState: true

# Either we land on tabs (already authenticated) or we land on login.
- extendedWaitUntil:
        visible:
            id: tabs.navigator
        timeout: 15000
        optional: true

- extendedWaitUntil:
        visible:
            id: login.screen
        timeout: 15000
        optional: true

# Deterministic E2E login (only available in E2E-enabled builds).
- runFlow:
        when:
            visible:
                id: login.screen
        commands:
            - extendedWaitUntil:
                    visible:
                        id: login.e2eButton
                    timeout: 15000
            - tapOn:
                    id: login.e2eButton

# Wait for tabs to be available
- extendedWaitUntil:
    visible:
      id: tabs.navigator
    timeout: 30000

# Settings (enable optional tabs)
- tapOn:
    id: tab.settings
- extendedWaitUntil:
    visible:
      id: screen.settings
    timeout: 15000

# Turn ON optional tabs (Food/Sport/Notifications) for the rest of this flow.
- tapOn:
    id: settings.toggle.foodTab
- tapOn:
    id: settings.toggle.sportTab
- tapOn:
    id: settings.toggle.notificationsTab

# Home
- tapOn:
    id: tab.home
- extendedWaitUntil:
    visible:
      id: screen.home
    timeout: 15000

# Trends
- tapOn:
    id: tab.trends
- extendedWaitUntil:
    visible:
      id: screen.trends
    timeout: 15000

# Food
- tapOn:
    id: tab.food
- extendedWaitUntil:
    visible:
      id: screen.food
    timeout: 15000

# Sport
- tapOn:
    id: tab.sport
- extendedWaitUntil:
    visible:
      id: screen.sport
    timeout: 15000
- assertVisible:
    id: sport.addButton

# Notifications
- tapOn:
    id: tab.notifications
- extendedWaitUntil:
    visible:
      id: screen.notifications
    timeout: 15000
- assertVisible:
    id: notifications.addButton

# Open Add Notification (fast stack navigation) and go back
- tapOn:
    id: notifications.addButton
- extendedWaitUntil:
    visible:
      id: screen.notifications.add
    timeout: 15000
- assertVisible:
    id: screen.notifications.add.title
- assertVisible:
    id: screen.notifications.add.submit
- back

# Open Add Sport Item and go back
- tapOn:
    id: tab.sport
- extendedWaitUntil:
    visible:
      id: screen.sport
    timeout: 15000
- tapOn:
    id: sport.addButton
- extendedWaitUntil:
    visible:
      id: screen.sport.add
    timeout: 15000
- assertVisible:
    id: sport.nameInput
- back
